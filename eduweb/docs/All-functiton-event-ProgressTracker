import { prepareContractCall } from "thirdweb";
import { useSendTransaction } from "thirdweb/react";
import { useReadContract } from "thirdweb/react";
import { prepareEvent } from "thirdweb";
import { useContractEvents } from "thirdweb/react";

export function StartSection() {
  const { mutate: sendTransaction } = useSendTransaction();

  const onClick = () => {
    const transaction = prepareContractCall({
      contract,
      method: "function startSection(uint256 courseId, uint256 sectionId)",
      params: [courseId, sectionId],
    });
    sendTransaction(transaction);
  };
}

export function CompleteSection() {
  const { mutate: sendTransaction } = useSendTransaction();

  const onClick = () => {
    const transaction = prepareContractCall({
      contract,
      method: "function completeSection(uint256 courseId, uint256 sectionId)",
      params: [courseId, sectionId],
    });
    sendTransaction(transaction);
  };
}

export function EmergencyResetProgress() {
  const { mutate: sendTransaction } = useSendTransaction();

  const onClick = () => {
    const transaction = prepareContractCall({
      contract,
      method: "function emergencyResetProgress(address student, uint256 courseId)",
      params: [student, courseId],
    });
    sendTransaction(transaction);
  };
}

export function TransferOwnership() {
  const { mutate: sendTransaction } = useSendTransaction();

  const onClick = () => {
    const transaction = prepareContractCall({
      contract,
      method: "function transferOwnership(address newOwner)",
      params: [newOwner],
    });
    sendTransaction(transaction);
  };
}

export function RenounceOwnership() {
  const { mutate: sendTransaction } = useSendTransaction();

  const onClick = () => {
    const transaction = prepareContractCall({
      contract,
      method: "function renounceOwnership()",
      params: [],
    });
    sendTransaction(transaction);
  };
}

export function IsSectionCompleted() {
  const { data, isPending } = useReadContract({
    contract,
    method: "function isSectionCompleted(address student, uint256 courseId, uint256 sectionId) view returns (bool)",
    params: [student, courseId, sectionId],
  });
}

export function GetCourseProgressPercentage() {
  const { data, isPending } = useReadContract({
    contract,
    method: "function getCourseProgressPercentage(address student, uint256 courseId) view returns (uint256)",
    params: [student, courseId],
  });
}

export function IsCourseCompleted() {
  const { data, isPending } = useReadContract({
    contract,
    method: "function isCourseCompleted(address student, uint256 courseId) view returns (bool)",
    params: [student, courseId],
  });
}

export function GetCourseSectionsProgress() {
  const { data, isPending } = useReadContract({
    contract,
    method: "function getCourseSectionsProgress(address student, uint256 courseId) view returns (bool[])",
    params: [student, courseId],
  });
}

export function GetSectionProgress() {
  const { data, isPending } = useReadContract({
    contract,
    method: "function getSectionProgress(address student, uint256 courseId, uint256 sectionId) view returns ((uint256 courseId, uint256 sectionId, bool completed, uint256 completedAt, uint256 startedAt, uint256 viewCount))",
    params: [student, courseId, sectionId],
  });
}

export function GetTotalSectionsCompleted() {
  const { data, isPending } = useReadContract({
    contract,
    method: "function getTotalSectionsCompleted(address student) view returns (uint256)",
    params: [student],
  });
}

export function GetCompletedCoursesCount() {
  const { data, isPending } = useReadContract({
    contract,
    method: "function getCompletedCoursesCount(address student) view returns (uint256)",
    params: [student],
  });
}

export function SectionProgress() {
  const { data, isPending } = useReadContract({
    contract,
    method: "function sectionProgress(address student, uint256 courseId, uint256 sectionId) view returns (uint256 courseId, uint256 sectionId, bool completed, uint256 completedAt, uint256 startedAt, uint256 viewCount)",
    params: [student, courseId, sectionId],
  });
}

export function CourseCompletedSections() {
  const { data, isPending } = useReadContract({
    contract,
    method: "function courseCompletedSections(address student, uint256 courseId) view returns (uint256)",
    params: [student, courseId],
  });
}

export function CoursesCompleted() {
  const { data, isPending } = useReadContract({
    contract,
    method: "function coursesCompleted(address student, uint256 courseId) view returns (bool)",
    params: [student, courseId],
  });
}

export function TotalSectionsCompletedByUser() {
  const { data, isPending } = useReadContract({
    contract,
    method: "function totalSectionsCompletedByUser(address student) view returns (uint256)",
    params: [student],
  });
}

export function TotalCoursesCompletedByUser() {
  const { data, isPending } = useReadContract({
    contract,
    method: "function totalCoursesCompletedByUser(address student) view returns (uint256)",
    params: [student],
  });
}

export function CourseFactory() {
  const { data, isPending } = useReadContract({
    contract,
    method: "function courseFactory() view returns (address)",
    params: [],
  });
}

export function CourseLicense() {
  const { data, isPending } = useReadContract({
    contract,
    method: "function courseLicense() view returns (address)",
    params: [],
  });
}

export function Owner() {
  const { data, isPending } = useReadContract({
    contract,
    method: "function owner() view returns (address)",
    params: [],
  });
}

export function SectionStartedEvent() {
  const sectionStartedEvent = prepareEvent({
    signature: "event SectionStarted(address indexed student, uint256 indexed courseId, uint256 indexed sectionId, uint256 startedAt)",
  });

  const { data: event } = useContractEvents({
    contract,
    events: [sectionStartedEvent],
  });
}

export function SectionCompletedEvent() {
  const sectionCompletedEvent = prepareEvent({
    signature: "event SectionCompleted(address indexed student, uint256 indexed courseId, uint256 indexed sectionId, uint256 completedAt)",
  });

  const { data: event } = useContractEvents({
    contract,
    events: [sectionCompletedEvent],
  });
}

export function CourseCompletedEvent() {
  const courseCompletedEvent = prepareEvent({
    signature: "event CourseCompleted(address indexed student, uint256 indexed courseId)",
  });

  const { data: event } = useContractEvents({
    contract,
    events: [courseCompletedEvent],
  });
}

export function ProgressResetEvent() {
  const progressResetEvent = prepareEvent({
    signature: "event ProgressReset(address indexed student, uint256 indexed courseId)",
  });

  const { data: event } = useContractEvents({
    contract,
    events: [progressResetEvent],
  });
}

export function OwnershipTransferredEvent() {
  const ownershipTransferredEvent = prepareEvent({
    signature: "event OwnershipTransferred(address indexed previousOwner, address indexed newOwner)",
  });

  const { data: event } = useContractEvents({
    contract,
    events: [ownershipTransferredEvent],
  });
}
